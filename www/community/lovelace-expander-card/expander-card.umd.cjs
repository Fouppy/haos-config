(function(q,N){typeof exports=="object"&&typeof module<"u"?module.exports=N():typeof define=="function"&&define.amd?define(N):(q=typeof globalThis<"u"?globalThis:q||self,q.ExpanderCard=N())})(this,(function(){"use strict";var xa=Object.defineProperty;var xi=q=>{throw TypeError(q)};var ka=(q,N,F)=>N in q?xa(q,N,{enumerable:!0,configurable:!0,writable:!0,value:F}):q[N]=F;var D=(q,N,F)=>ka(q,typeof N!="symbol"?N+"":N,F),tr=(q,N,F)=>N.has(q)||xi("Cannot "+F);var c=(q,N,F)=>(tr(q,N,"read from private field"),F?F.call(q):N.get(q)),A=(q,N,F)=>N.has(q)?xi("Cannot add the same private member more than once"):N instanceof WeakSet?N.add(q):N.set(q,F),y=(q,N,F,tn)=>(tr(q,N,"write to private field"),tn?tn.call(q,F):N.set(q,F),F),M=(q,N,F)=>(tr(q,N,"access private method"),F);var bi,Pt,It,yt,wt,Xt,zt,Dt,Z,nr,Ct,ki,Si,be,ue,Kt,Pe,bt,Ie,$e,ie,ze,Je,rt,$t,it,Et,st,xn,L,Ci,Ti,rr,Sn,Cn,ir,Ce,De,de,Zt,Qt,kn,Ge,Ee;typeof window<"u"&&((bi=window.__svelte??(window.__svelte={})).v??(bi.v=new Set)).add("5");const N={icon:"","arrow-color":"","icon-rotate-degree":"","header-color":"","button-background":"","min-width-expanded":0,"max-width-expanded":0,"storage-id":"","expander-card-id":"","show-button-users":[],"start-expanded-users":[],"expander-card-background":"","expander-card-background-expanded":"","expander-card-display":"",gap:"",padding:"","expanded-gap":"","child-padding":"","child-margin-top":"","overlay-margin":"","title-card-padding":"",style:""},F={icon:{}},tn={text:{}},Ai={text:{multiline:!0}},Oi={boolean:{}},qi={object:{}},Ni=e=>({number:{unit_of_measurement:e}}),Ri=(e,t)=>({name:e,label:t,selector:F}),U=(e,t)=>({name:e,label:t,selector:tn}),ji=(e,t)=>({name:e,label:t,selector:Ai}),Tt=(e,t)=>({name:e,label:t,selector:Oi}),Mi=(e,t)=>({name:e,label:t,selector:qi}),sr=(e,t,n)=>({name:e,label:t,selector:Ni(n)}),Pi=e=>({label:e,type:"constant"}),Ii=[{type:"expandable",label:"Expander Card Settings",icon:"mdi:arrow-down-bold-box-outline",schema:[{...U("title","Title")},{...Ri("icon","Icon")},{type:"expandable",label:"Expander control",icon:"mdi:cog-outline",schema:[{type:"grid",schema:[{...Tt("expanded","Start expanded")},{...Tt("animation","Enable animation")},{...sr("min-width-expanded","Min width expanded","px")},{...sr("max-width-expanded","Max width expanded","px")},{...U("storage-id","Storage ID")},{...U("expander-card-id","Expander card ID")}]}]},{type:"expandable",label:"Expander styling",icon:"mdi:palette-swatch",schema:[{type:"grid",schema:[{...U("arrow-color","Icon color")},{...U("icon-rotate-degree","Icon rotate degree")},{...U("header-color","Header color")},{...U("button-background","Button background color")},{...U("expander-card-background","Background")},{...U("expander-card-background-expanded","Background when expanded")},{...U("expander-card-display","Expander card display")},{...Tt("clear","Clear border and background")},{...U("gap","Gap")},{...U("padding","Padding")}]}]},{type:"expandable",label:"Card styling",icon:"mdi:palette-swatch-outline",schema:[{type:"grid",schema:[{...U("expanded-gap","Card gap")},{...U("child-padding","Card padding")},{...U("child-margin-top","Card margin top")},{...Tt("clear-children","Clear card border and background")}]}]},{type:"expandable",label:"Title card",icon:"mdi:subtitles-outline",schema:[{...Pi("Use YAML to specify a title card to replace the expander title")},{...Mi("title-card","")},{type:"grid",schema:[{...Tt("title-card-clickable","Make title card clickable to expand/collapse")},{...Tt("title-card-button-overlay","Overlay expand button on title card")},{...U("overlay-margin","Overlay margin")},{...U("title-card-padding","Title card padding")}]}]},{type:"expandable",label:"User settings",icon:"mdi:account-multiple-outline",schema:[{type:"grid",schema:[{name:"show-button-users",label:"Show button users",selector:{select:{multiple:!0,mode:"dropdown",custom:!0,options:["[[users]]"]}}},{name:"start-expanded-users",label:"Start expanded users",selector:{select:{multiple:!0,mode:"dropdown",custom:!0,options:["[[users]]"]}}}]}]},{type:"expandable",label:"Advanced styling",icon:"mdi:brush-outline",schema:[{...ji("style","Custom CSS style")}]}]}],Lt=window;let nn=Lt.cardHelpers;const zi=new Promise(e=>{nn&&e(),Lt.loadCardHelpers&&Lt.loadCardHelpers().then(t=>{nn=t,Lt.cardHelpers=nn,e()})});async function Di(){const e=document.querySelector("home-assistant"),t=e==null?void 0:e.hass;return t?(await t.callWS({type:"config/auth/list"})).filter(i=>!i.system_generated).map(i=>i.name):void 0}const Li=async()=>{const t=await(await zi.then(()=>nn.createCardElement({type:"vertical-stack",cards:[]}))).constructor.getConfigElement(),n=await Di();return class extends t.constructor{constructor(){super(),this._computeLabelCallback=r=>r.label??r.name??"",this._valueChanged=r=>{const s=r.detail.value,o=Object.entries(N);for(const[a,l]of o){if(typeof l=="object"&&Array.isArray(l)&&Array.isArray(s[a])){JSON.stringify(s[a])===JSON.stringify(l)&&delete s[a];continue}s[a]===l&&delete s[a]}this._config=s,this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:this._config}}))},this._users=n}setConfig(r){this._config=r}get _schema(){const s=JSON.stringify(Ii),o=this._users.map(f=>f.replace(/\\/g,"\\\\").replace(/"/g,'\\"')).join('","'),a=s.replace(/\[\[users\]\]/g,o);return JSON.parse(a)}set _schema(r){}}},Fi=(async()=>{for(;customElements.get("home-assistant")===void 0;)await new Promise(e=>Lt.setTimeout(e,100));if(!customElements.get("expander-card-editor")){const e=await Li();customElements.define("expander-card-editor",e)}}),Bi=1,Hi=2,Yi=16,Ui=1,Vi=2,ar="[",rn="[!",Tn="]",ot={},V=Symbol(),Wi="http://www.w3.org/1999/xhtml",Ji="http://www.w3.org/2000/svg",or=!1;var lr=Array.isArray,Gi=Array.prototype.indexOf,An=Array.from,sn=Object.keys,an=Object.defineProperty,At=Object.getOwnPropertyDescriptor,Xi=Object.getOwnPropertyDescriptors,Ki=Object.prototype,Zi=Array.prototype,fr=Object.getPrototypeOf,cr=Object.isExtensible;function Qi(e){for(var t=0;t<e.length;t++)e[t]()}function ur(){var e,t,n=new Promise((i,r)=>{e=i,t=r});return{promise:n,resolve:e,reject:t}}const W=2,on=4,On=8,Be=16,He=32,Xe=64,ln=128,xe=512,J=1024,re=2048,Ye=4096,ae=8192,Ke=16384,fn=32768,lt=65536,dr=1<<17,hr=1<<18,ft=1<<19,es=1<<20,Ft=32768,qn=1<<21,Nn=1<<22,Ze=1<<23,cn=Symbol("$state"),ts=Symbol("legacy props"),ns=Symbol(""),Ot=new class extends Error{constructor(){super(...arguments);D(this,"name","StaleReactionError");D(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},rs=1,Rn=3,ct=8;function is(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ss(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function as(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function os(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ls(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function cs(){throw new Error("https://svelte.dev/e/hydration_failed")}function us(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ds(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function hs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ps(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}function Bt(e){console.warn("https://svelte.dev/e/hydration_mismatch")}function vs(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let w=!1;function oe(e){w=e}let x;function H(e){if(e===null)throw Bt(),ot;return x=e}function Qe(){return H(Se(x))}function Ue(e){if(w){if(Se(x)!==null)throw Bt(),ot;x=e}}function _s(e=1){if(w){for(var t=e,n=x;t--;)n=Se(n);x=n}}function un(e=!0){for(var t=0,n=x;;){if(n.nodeType===ct){var i=n.data;if(i===Tn){if(t===0)return n;t-=1}else(i===ar||i===rn)&&(t+=1)}var r=Se(n);e&&n.remove(),n=r}}function pr(e){if(!e||e.nodeType!==ct)throw Bt(),ot;return e.data}function vr(e){return e===this.v}function gs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function _r(e){return!gs(e,this.v)}let ms=!1,le=null;function qt(e){le=e}function jn(e,t=!1,n){le={p:le,i:!1,c:null,e:null,s:e,x:null,l:null}}function Mn(e){var t=le,n=t.e;if(n!==null){t.e=null;for(var i of n)zr(i)}return e!==void 0&&(t.x=e),t.i=!0,le=t.p,e??{}}function gr(){return!0}let ut=[];function mr(){var e=ut;ut=[],Qi(e)}function dn(e){if(ut.length===0&&!Ht){var t=ut;queueMicrotask(()=>{t===ut&&mr()})}ut.push(e)}function ys(){for(;ut.length>0;)mr()}function yr(e){var t=C;if(t===null)return S.f|=Ze,e;if((t.f&fn)===0){if((t.f&ln)===0)throw e;t.b.error(e)}else Nt(e,t)}function Nt(e,t){for(;t!==null;){if((t.f&ln)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const hn=new Set;let j=null,I=null,Oe=[],pn=null,Pn=!1,Ht=!1;const En=class En{constructor(){A(this,Z);D(this,"committed",!1);D(this,"current",new Map);D(this,"previous",new Map);A(this,Pt,new Set);A(this,It,new Set);A(this,yt,0);A(this,wt,0);A(this,Xt,null);A(this,zt,[]);A(this,Dt,[]);D(this,"skipped_effects",new Set);D(this,"is_fork",!1)}process(t){var i;Oe=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of t)M(this,Z,nr).call(this,r,n);this.is_fork||M(this,Z,ki).call(this),c(this,wt)>0||this.is_fork?(M(this,Z,Ct).call(this,n.effects),M(this,Z,Ct).call(this,n.render_effects),M(this,Z,Ct).call(this,n.block_effects)):(j=null,br(n.render_effects),br(n.effects),(i=c(this,Xt))==null||i.resolve()),I=null}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Ze)===0&&(this.current.set(t,t.v),I==null||I.set(t,t.v))}activate(){j=this,this.apply()}deactivate(){j===this&&(j=null,I=null)}flush(){if(this.activate(),Oe.length>0){if(wr(),j!==null&&j!==this)return}else c(this,yt)===0&&this.process([]);this.deactivate()}discard(){for(const t of c(this,It))t(this);c(this,It).clear()}increment(t){y(this,yt,c(this,yt)+1),t&&y(this,wt,c(this,wt)+1)}decrement(t){y(this,yt,c(this,yt)-1),t&&y(this,wt,c(this,wt)-1),this.revive()}revive(){for(const t of c(this,zt))K(t,re),dt(t);for(const t of c(this,Dt))K(t,Ye),dt(t);y(this,zt,[]),y(this,Dt,[]),this.flush()}oncommit(t){c(this,Pt).add(t)}ondiscard(t){c(this,It).add(t)}settled(){return(c(this,Xt)??y(this,Xt,ur())).promise}static ensure(){if(j===null){const t=j=new En;hn.add(j),Ht||En.enqueue(()=>{j===t&&t.flush()})}return j}static enqueue(t){dn(t)}apply(){}};Pt=new WeakMap,It=new WeakMap,yt=new WeakMap,wt=new WeakMap,Xt=new WeakMap,zt=new WeakMap,Dt=new WeakMap,Z=new WeakSet,nr=function(t,n){var u;t.f^=J;for(var i=t.first;i!==null;){var r=i.f,s=(r&(He|Xe))!==0,o=s&&(r&J)!==0,a=o||(r&ae)!==0||this.skipped_effects.has(i);if((i.f&ln)!==0&&((u=i.b)!=null&&u.is_pending())&&(n={parent:n,effect:i,effects:[],render_effects:[],block_effects:[]}),!a&&i.fn!==null){s?i.f^=J:(r&on)!==0?n.effects.push(i):Jt(i)&&((i.f&Be)!==0&&n.block_effects.push(i),Gt(i));var l=i.first;if(l!==null){i=l;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)f===n.effect&&(M(this,Z,Ct).call(this,n.effects),M(this,Z,Ct).call(this,n.render_effects),M(this,Z,Ct).call(this,n.block_effects),n=n.parent),i=f.next,f=f.parent}},Ct=function(t){for(const n of t)((n.f&re)!==0?c(this,zt):c(this,Dt)).push(n),K(n,J)},ki=function(){if(c(this,wt)===0){for(const t of c(this,Pt))t();c(this,Pt).clear()}c(this,yt)===0&&M(this,Z,Si).call(this)},Si=function(){var r;if(hn.size>1){this.previous.clear();var t=I,n=!0,i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of hn){if(s===this){n=!1;continue}const o=[];for(const[l,f]of this.current){if(s.current.has(l))if(n&&f!==s.current.get(l))s.current.set(l,f);else continue;o.push(l)}if(o.length===0)continue;const a=[...s.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){const l=new Set,f=new Map;for(const u of o)$r(u,a,l,f);if(Oe.length>0){j=s,s.apply();for(const u of Oe)M(r=s,Z,nr).call(r,u,i);Oe=[],s.deactivate()}}}j=null,I=t}this.committed=!0,hn.delete(this)};let qe=En;function fe(e){var t=Ht;Ht=!0;try{for(var n;;){if(ys(),Oe.length===0&&(j==null||j.flush(),Oe.length===0))return pn=null,n;wr()}}finally{Ht=t}}function wr(){var e=vt;Pn=!0;try{var t=0;for(Wr(!0);Oe.length>0;){var n=qe.ensure();if(t++>1e3){var i,r;ws()}n.process(Oe),et.clear()}}finally{Pn=!1,Wr(e),pn=null}}function ws(){try{fs()}catch(e){Nt(e,pn)}}let ke=null;function br(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var i=e[n++];if((i.f&(Ke|ae))===0&&Jt(i)&&(ke=new Set,Gt(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Hr(i):i.fn=null),(ke==null?void 0:ke.size)>0)){et.clear();for(const r of ke){if((r.f&(Ke|ae))!==0)continue;const s=[r];let o=r.parent;for(;o!==null;)ke.has(o)&&(ke.delete(o),s.push(o)),o=o.parent;for(let a=s.length-1;a>=0;a--){const l=s[a];(l.f&(Ke|ae))===0&&Gt(l)}}ke.clear()}}ke=null}}function $r(e,t,n,i){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const s=r.f;(s&W)!==0?$r(r,t,n,i):(s&(Nn|Be))!==0&&(s&re)===0&&Er(r,t,i)&&(K(r,re),dt(r))}}function Er(e,t,n){const i=n.get(e);if(i!==void 0)return i;if(e.deps!==null)for(const r of e.deps){if(t.includes(r))return!0;if((r.f&W)!==0&&Er(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function dt(e){for(var t=pn=e;t.parent!==null;){t=t.parent;var n=t.f;if(Pn&&t===C&&(n&Be)!==0&&(n&hr)===0)return;if((n&(Xe|He))!==0){if((n&J)===0)return;t.f^=J}}Oe.push(t)}function bs(e){let t=0,n=ht(0),i;return()=>{mn()&&(v(n),Ln(()=>(t===0&&(i=Hn(()=>e(()=>Yt(n)))),t+=1,()=>{dn(()=>{t-=1,t===0&&(i==null||i(),i=void 0,Yt(n))})})))}}var $s=lt|ft|ln;function Es(e,t,n){new xs(e,t,n)}class xs{constructor(t,n,i){A(this,L);D(this,"parent");A(this,be,!1);A(this,ue);A(this,Kt,w?x:null);A(this,Pe);A(this,bt);A(this,Ie);A(this,$e,null);A(this,ie,null);A(this,ze,null);A(this,Je,null);A(this,rt,null);A(this,$t,0);A(this,it,0);A(this,Et,!1);A(this,st,null);A(this,xn,bs(()=>(y(this,st,ht(c(this,$t))),()=>{y(this,st,null)})));y(this,ue,t),y(this,Pe,n),y(this,bt,i),this.parent=C.b,y(this,be,!!c(this,Pe).pending),y(this,Ie,yn(()=>{if(C.b=this,w){const s=c(this,Kt);Qe(),s.nodeType===ct&&s.data===rn?M(this,L,Ti).call(this):M(this,L,Ci).call(this)}else{var r=M(this,L,rr).call(this);try{y(this,$e,_e(()=>i(r)))}catch(s){this.error(s)}c(this,it)>0?M(this,L,Cn).call(this):y(this,be,!1)}return()=>{var s;(s=c(this,rt))==null||s.remove()}},$s)),w&&y(this,ue,x)}is_pending(){return c(this,be)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!c(this,Pe).pending}update_pending_count(t){M(this,L,ir).call(this,t),y(this,$t,c(this,$t)+t),c(this,st)&&gn(c(this,st),c(this,$t))}get_effect_pending(){return c(this,xn).call(this),v(c(this,st))}error(t){var n=c(this,Pe).onerror;let i=c(this,Pe).failed;if(c(this,Et)||!n&&!i)throw t;c(this,$e)&&(G(c(this,$e)),y(this,$e,null)),c(this,ie)&&(G(c(this,ie)),y(this,ie,null)),c(this,ze)&&(G(c(this,ze)),y(this,ze,null)),w&&(H(c(this,Kt)),_s(),H(un()));var r=!1,s=!1;const o=()=>{if(r){vs();return}r=!0,s&&ps(),qe.ensure(),y(this,$t,0),c(this,ze)!==null&&Rt(c(this,ze),()=>{y(this,ze,null)}),y(this,be,this.has_pending_snippet()),y(this,$e,M(this,L,Sn).call(this,()=>(y(this,Et,!1),_e(()=>c(this,bt).call(this,c(this,ue)))))),c(this,it)>0?M(this,L,Cn).call(this):y(this,be,!1)};var a=S;try{X(null),s=!0,n==null||n(t,o),s=!1}catch(l){Nt(l,c(this,Ie)&&c(this,Ie).parent)}finally{X(a)}i&&dn(()=>{y(this,ze,M(this,L,Sn).call(this,()=>{qe.ensure(),y(this,Et,!0);try{return _e(()=>{i(c(this,ue),()=>t,()=>o)})}catch(l){return Nt(l,c(this,Ie).parent),null}finally{y(this,Et,!1)}}))})}}be=new WeakMap,ue=new WeakMap,Kt=new WeakMap,Pe=new WeakMap,bt=new WeakMap,Ie=new WeakMap,$e=new WeakMap,ie=new WeakMap,ze=new WeakMap,Je=new WeakMap,rt=new WeakMap,$t=new WeakMap,it=new WeakMap,Et=new WeakMap,st=new WeakMap,xn=new WeakMap,L=new WeakSet,Ci=function(){try{y(this,$e,_e(()=>c(this,bt).call(this,c(this,ue))))}catch(t){this.error(t)}y(this,be,!1)},Ti=function(){const t=c(this,Pe).pending;t&&(y(this,ie,_e(()=>t(c(this,ue)))),qe.enqueue(()=>{var n=M(this,L,rr).call(this);y(this,$e,M(this,L,Sn).call(this,()=>(qe.ensure(),_e(()=>c(this,bt).call(this,n))))),c(this,it)>0?M(this,L,Cn).call(this):(Rt(c(this,ie),()=>{y(this,ie,null)}),y(this,be,!1))}))},rr=function(){var t=c(this,ue);return c(this,be)&&(y(this,rt,pe()),c(this,ue).before(c(this,rt)),t=c(this,rt)),t},Sn=function(t){var n=C,i=S,r=le;ge(c(this,Ie)),X(c(this,Ie)),qt(c(this,Ie).ctx);try{return t()}catch(s){return yr(s),null}finally{ge(n),X(i),qt(r)}},Cn=function(){const t=c(this,Pe).pending;c(this,$e)!==null&&(y(this,Je,document.createDocumentFragment()),c(this,Je).append(c(this,rt)),Vr(c(this,$e),c(this,Je))),c(this,ie)===null&&y(this,ie,_e(()=>t(c(this,ue))))},ir=function(t){var n;if(!this.has_pending_snippet()){this.parent&&M(n=this.parent,L,ir).call(n,t);return}y(this,it,c(this,it)+t),c(this,it)===0&&(y(this,be,!1),c(this,ie)&&Rt(c(this,ie),()=>{y(this,ie,null)}),c(this,Je)&&(c(this,ue).before(c(this,Je)),y(this,Je,null)))};function ks(e,t,n,i){const r=_n;if(n.length===0&&e.length===0){i(t.map(r));return}var s=j,o=C,a=Ss();function l(){Promise.all(n.map(f=>Cs(f))).then(f=>{a();try{i([...t.map(r),...f])}catch(u){(o.f&Ke)===0&&Nt(u,o)}s==null||s.deactivate(),vn()}).catch(f=>{Nt(f,o)})}e.length>0?Promise.all(e).then(()=>{a();try{return l()}finally{s==null||s.deactivate(),vn()}}):l()}function Ss(){var e=C,t=S,n=le,i=j;return function(s=!0){ge(e),X(t),qt(n),s&&(i==null||i.activate())}}function vn(){ge(null),X(null),qt(null)}function _n(e){var t=W|re,n=S!==null&&(S.f&W)!==0?S:null;return C!==null&&(C.f|=ft),{ctx:le,deps:null,effects:null,equals:vr,f:t,fn:e,reactions:null,rv:0,v:V,wv:0,parent:n??C,ac:null}}function Cs(e,t){let n=C;n===null&&ss();var i=n.b,r=void 0,s=ht(V),o=!S,a=new Map;return Ps(()=>{var d;var l=ur();r=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{f===j&&f.committed&&f.deactivate(),vn()})}catch(p){l.reject(p),vn()}var f=j;if(o){var u=!i.is_pending();i.update_pending_count(1),f.increment(u),(d=a.get(f))==null||d.reject(Ot),a.delete(f),a.set(f,l)}const h=(p,_=void 0)=>{if(f.activate(),_)_!==Ot&&(s.f|=Ze,gn(s,_));else{(s.f&Ze)!==0&&(s.f^=Ze),gn(s,p);for(const[b,$]of a){if(a.delete(b),b===f)break;$.reject(Ot)}}o&&(i.update_pending_count(-1),f.decrement(u))};l.promise.then(h,p=>h(null,p||"unknown"))}),Ir(()=>{for(const l of a.values())l.reject(Ot)}),new Promise(l=>{function f(u){function h(){u===r?l(s):f(r)}u.then(h,h)}f(r)})}function Ts(e){const t=_n(e);return Gr(t),t}function As(e){const t=_n(e);return t.equals=_r,t}function xr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)G(t[n])}}function Os(e){for(var t=e.parent;t!==null;){if((t.f&W)===0)return t;t=t.parent}return null}function In(e){var t,n=C;ge(Os(e));try{e.f&=~Ft,xr(e),t=ei(e)}finally{ge(n)}return t}function kr(e){var t=In(e);if(e.equals(t)||(e.v=t,e.wv=Zr()),!_t)if(I!==null)mn()&&I.set(e,e.v);else{var n=(e.f&xe)===0?Ye:J;K(e,n)}}let zn=new Set;const et=new Map;let Sr=!1;function ht(e,t){var n={f:0,v:e,reactions:null,equals:vr,rv:0,wv:0};return n}function B(e,t){const n=ht(e);return Gr(n),n}function Cr(e,t=!1,n=!0){const i=ht(e);return t||(i.equals=_r),i}function k(e,t,n=!1){S!==null&&(!Re||(S.f&dr)!==0)&&gr()&&(S.f&(W|Be|Nn|dr))!==0&&!(ee!=null&&ee.includes(e))&&hs();let i=n?pt(t):t;return gn(e,i)}function gn(e,t){if(!e.equals(t)){var n=e.v;_t?et.set(e,t):et.set(e,n),e.v=t;var i=qe.ensure();i.capture(e,n),(e.f&W)!==0&&((e.f&re)!==0&&In(e),K(e,(e.f&xe)!==0?J:Ye)),e.wv=Zr(),Tr(e,re),C!==null&&(C.f&J)!==0&&(C.f&(He|Xe))===0&&(me===null?zs([e]):me.push(e)),!i.is_fork&&zn.size>0&&!Sr&&qs()}return t}function qs(){Sr=!1;const e=Array.from(zn);for(const t of e)(t.f&J)!==0&&K(t,Ye),Jt(t)&&Gt(t);zn.clear()}function Yt(e){k(e,e.v+1)}function Tr(e,t){var n=e.reactions;if(n!==null)for(var i=n.length,r=0;r<i;r++){var s=n[r],o=s.f,a=(o&re)===0;if(a&&K(s,t),(o&W)!==0){var l=s;I==null||I.delete(l),(o&Ft)===0&&(o&xe&&(s.f|=Ft),Tr(l,Ye))}else a&&((o&Be)!==0&&ke!==null&&ke.add(s),dt(s))}}function pt(e){if(typeof e!="object"||e===null||cn in e)return e;const t=fr(e);if(t!==Ki&&t!==Zi)return e;var n=new Map,i=lr(e),r=B(0),s=gt,o=a=>{if(gt===s)return a();var l=S,f=gt;X(null),Kr(s);var u=a();return X(l),Kr(f),u};return i&&n.set("length",B(e.length)),new Proxy(e,{defineProperty(a,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&us();var u=n.get(l);return u===void 0?u=o(()=>{var h=B(f.value);return n.set(l,h),h}):k(u,f.value,!0),!0},deleteProperty(a,l){var f=n.get(l);if(f===void 0){if(l in a){const u=o(()=>B(V));n.set(l,u),Yt(r)}}else k(f,V),Yt(r);return!0},get(a,l,f){var p;if(l===cn)return e;var u=n.get(l),h=l in a;if(u===void 0&&(!h||(p=At(a,l))!=null&&p.writable)&&(u=o(()=>{var _=pt(h?a[l]:V),b=B(_);return b}),n.set(l,u)),u!==void 0){var d=v(u);return d===V?void 0:d}return Reflect.get(a,l,f)},getOwnPropertyDescriptor(a,l){var f=Reflect.getOwnPropertyDescriptor(a,l);if(f&&"value"in f){var u=n.get(l);u&&(f.value=v(u))}else if(f===void 0){var h=n.get(l),d=h==null?void 0:h.v;if(h!==void 0&&d!==V)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return f},has(a,l){var d;if(l===cn)return!0;var f=n.get(l),u=f!==void 0&&f.v!==V||Reflect.has(a,l);if(f!==void 0||C!==null&&(!u||(d=At(a,l))!=null&&d.writable)){f===void 0&&(f=o(()=>{var p=u?pt(a[l]):V,_=B(p);return _}),n.set(l,f));var h=v(f);if(h===V)return!1}return u},set(a,l,f,u){var T;var h=n.get(l),d=l in a;if(i&&l==="length")for(var p=f;p<h.v;p+=1){var _=n.get(p+"");_!==void 0?k(_,V):p in a&&(_=o(()=>B(V)),n.set(p+"",_))}if(h===void 0)(!d||(T=At(a,l))!=null&&T.writable)&&(h=o(()=>B(void 0)),k(h,pt(f)),n.set(l,h));else{d=h.v!==V;var b=o(()=>pt(f));k(h,b)}var $=Reflect.getOwnPropertyDescriptor(a,l);if($!=null&&$.set&&$.set.call(u,f),!d){if(i&&typeof l=="string"){var z=n.get("length"),P=Number(l);Number.isInteger(P)&&P>=z.v&&k(z,P+1)}Yt(r)}return!0},ownKeys(a){v(r);var l=Reflect.ownKeys(a).filter(h=>{var d=n.get(h);return d===void 0||d.v!==V});for(var[f,u]of n)u.v!==V&&!(f in a)&&l.push(f);return l},setPrototypeOf(){ds()}})}var Ar,Or,qr,Nr;function Dn(){if(Ar===void 0){Ar=window,Or=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;qr=At(t,"firstChild").get,Nr=At(t,"nextSibling").get,cr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),cr(n)&&(n.__t=void 0)}}function pe(e=""){return document.createTextNode(e)}function ve(e){return qr.call(e)}function Se(e){return Nr.call(e)}function tt(e,t){if(!w)return ve(e);var n=ve(x);if(n===null)n=x.appendChild(pe());else if(t&&n.nodeType!==Rn){var i=pe();return n==null||n.before(i),H(i),i}return H(n),n}function Rr(e,t=!1){if(!w){var n=ve(e);return n instanceof Comment&&n.data===""?Se(n):n}if(t&&(x==null?void 0:x.nodeType)!==Rn){var i=pe();return x==null||x.before(i),H(i),i}return x}function Ut(e,t=1,n=!1){let i=w?x:e;for(var r;t--;)r=i,i=Se(i);if(!w)return i;if(n&&(i==null?void 0:i.nodeType)!==Rn){var s=pe();return i===null?r==null||r.after(s):i.before(s),H(s),s}return H(i),i}function jr(e){e.textContent=""}function Mr(){return!1}function Pr(e){var t=S,n=C;X(null),ge(null);try{return e()}finally{X(t),ge(n)}}function Ns(e){C===null&&(S===null&&ls(),os()),_t&&as()}function Rs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ne(e,t,n,i=!0){var r=C;r!==null&&(r.f&ae)!==0&&(e|=ae);var s={ctx:le,deps:null,nodes_start:null,nodes_end:null,f:e|re|xe,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Gt(s),s.f|=fn}catch(l){throw G(s),l}else t!==null&&dt(s);if(i){var o=s;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&ft)===0&&(o=o.first,(e&Be)!==0&&(e&lt)!==0&&o!==null&&(o.f|=lt)),o!==null&&(o.parent=r,r!==null&&Rs(o,r),S!==null&&(S.f&W)!==0&&(e&Xe)===0)){var a=S;(a.effects??(a.effects=[])).push(o)}}return s}function mn(){return S!==null&&!Re}function Ir(e){const t=Ne(On,null,!1);return K(t,J),t.teardown=e,t}function Vt(e){Ns();var t=C.f,n=!S&&(t&He)!==0&&(t&fn)===0;if(n){var i=le;(i.e??(i.e=[])).push(e)}else return zr(e)}function zr(e){return Ne(on|es,e,!1)}function js(e){qe.ensure();const t=Ne(Xe|ft,e,!0);return()=>{G(t)}}function Ms(e){qe.ensure();const t=Ne(Xe|ft,e,!0);return(n={})=>new Promise(i=>{n.outro?Rt(t,()=>{G(t),i(void 0)}):(G(t),i(void 0))})}function Dr(e){return Ne(on,e,!1)}function Ps(e){return Ne(Nn|ft,e,!0)}function Ln(e,t=0){return Ne(On|t,e,!0)}function Ve(e,t=[],n=[],i=[],r=!1){ks(i,t,n,s=>{Ne(r?on:On,()=>e(...s.map(v)),!0)})}function yn(e,t=0){var n=Ne(Be|t,e,!0);return n}function _e(e,t=!0){return Ne(He|ft,e,!0,t)}function Lr(e){var t=e.teardown;if(t!==null){const n=_t,i=S;Jr(!0),X(null);try{t.call(null)}finally{Jr(n),X(i)}}}function Fr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Pr(()=>{r.abort(Ot)});var i=n.next;(n.f&Xe)!==0?n.parent=null:G(n,t),n=i}}function Is(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&He)===0&&G(t),t=n}}function G(e,t=!0){var n=!1;(t||(e.f&hr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Br(e.nodes_start,e.nodes_end),n=!0),Fr(e,t&&!n),wn(e,0),K(e,Ke);var i=e.transitions;if(i!==null)for(const s of i)s.stop();Lr(e);var r=e.parent;r!==null&&r.first!==null&&Hr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Br(e,t){for(;e!==null;){var n=e===t?null:Se(e);e.remove(),e=n}}function Hr(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Rt(e,t,n=!0){var i=[];Fn(e,i,!0),Yr(i,()=>{n&&G(e),t&&t()})}function Yr(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function Fn(e,t,n){if((e.f&ae)===0){if(e.f^=ae,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var i=e.first;i!==null;){var r=i.next,s=(i.f&lt)!==0||(i.f&He)!==0&&(e.f&Be)!==0;Fn(i,t,s?n:!1),i=r}}}function Bn(e){Ur(e,!0)}function Ur(e,t){if((e.f&ae)!==0){e.f^=ae,(e.f&J)===0&&(K(e,re),dt(e));for(var n=e.first;n!==null;){var i=n.next,r=(n.f&lt)!==0||(n.f&He)!==0;Ur(n,r?t:!1),n=i}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}function Vr(e,t){for(var n=e.nodes_start,i=e.nodes_end;n!==null;){var r=n===i?null:Se(n);t.append(n),n=r}}let vt=!1;function Wr(e){vt=e}let _t=!1;function Jr(e){_t=e}let S=null,Re=!1;function X(e){S=e}let C=null;function ge(e){C=e}let ee=null;function Gr(e){S!==null&&(ee===null?ee=[e]:ee.push(e))}let te=null,ce=0,me=null;function zs(e){me=e}let Xr=1,Wt=0,gt=Wt;function Kr(e){gt=e}function Zr(){return++Xr}function Jt(e){var t=e.f;if((t&re)!==0)return!0;if(t&W&&(e.f&=~Ft),(t&Ye)!==0){var n=e.deps;if(n!==null)for(var i=n.length,r=0;r<i;r++){var s=n[r];if(Jt(s)&&kr(s),s.wv>e.wv)return!0}(t&xe)!==0&&I===null&&K(e,J)}return!1}function Qr(e,t,n=!0){var i=e.reactions;if(i!==null&&!(ee!=null&&ee.includes(e)))for(var r=0;r<i.length;r++){var s=i[r];(s.f&W)!==0?Qr(s,t,!1):t===s&&(n?K(s,re):(s.f&J)!==0&&K(s,Ye),dt(s))}}function ei(e){var _;var t=te,n=ce,i=me,r=S,s=ee,o=le,a=Re,l=gt,f=e.f;te=null,ce=0,me=null,S=(f&(He|Xe))===0?e:null,ee=null,qt(e.ctx),Re=!1,gt=++Wt,e.ac!==null&&(Pr(()=>{e.ac.abort(Ot)}),e.ac=null);try{e.f|=qn;var u=e.fn,h=u(),d=e.deps;if(te!==null){var p;if(wn(e,ce),d!==null&&ce>0)for(d.length=ce+te.length,p=0;p<te.length;p++)d[ce+p]=te[p];else e.deps=d=te;if(vt&&mn()&&(e.f&xe)!==0)for(p=ce;p<d.length;p++)((_=d[p]).reactions??(_.reactions=[])).push(e)}else d!==null&&ce<d.length&&(wn(e,ce),d.length=ce);if(gr()&&me!==null&&!Re&&d!==null&&(e.f&(W|Ye|re))===0)for(p=0;p<me.length;p++)Qr(me[p],e);return r!==null&&r!==e&&(Wt++,me!==null&&(i===null?i=me:i.push(...me))),(e.f&Ze)!==0&&(e.f^=Ze),h}catch(b){return yr(b)}finally{e.f^=qn,te=t,ce=n,me=i,S=r,ee=s,qt(o),Re=a,gt=l}}function Ds(e,t){let n=t.reactions;if(n!==null){var i=Gi.call(n,e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&(t.f&W)!==0&&(te===null||!te.includes(t))&&(K(t,Ye),(t.f&xe)!==0&&(t.f^=xe,t.f&=~Ft),xr(t),wn(t,0))}function wn(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Ds(e,n[i])}function Gt(e){var t=e.f;if((t&Ke)===0){K(e,J);var n=C,i=vt;C=e,vt=!0;try{(t&Be)!==0?Is(e):Fr(e),Lr(e);var r=ei(e);e.teardown=typeof r=="function"?r:null,e.wv=Xr;var s;or&&ms&&(e.f&re)!==0&&e.deps}finally{vt=i,C=n}}}function v(e){var t=e.f,n=(t&W)!==0;if(S!==null&&!Re){var i=C!==null&&(C.f&Ke)!==0;if(!i&&!(ee!=null&&ee.includes(e))){var r=S.deps;if((S.f&qn)!==0)e.rv<Wt&&(e.rv=Wt,te===null&&r!==null&&r[ce]===e?ce++:te===null?te=[e]:te.includes(e)||te.push(e));else{(S.deps??(S.deps=[])).push(e);var s=e.reactions;s===null?e.reactions=[S]:s.includes(S)||s.push(S)}}}if(_t){if(et.has(e))return et.get(e);if(n){var o=e,a=o.v;return((o.f&J)===0&&o.reactions!==null||ni(o))&&(a=In(o)),et.set(o,a),a}}else if(n){if(o=e,I!=null&&I.has(o))return I.get(o);Jt(o)&&kr(o),vt&&mn()&&(o.f&xe)===0&&ti(o)}else if(I!=null&&I.has(e))return I.get(e);if((e.f&Ze)!==0)throw e.v;return e.v}function ti(e){if(e.deps!==null){e.f^=xe;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&W)!==0&&(t.f&xe)===0&&ti(t)}}function ni(e){if(e.v===V)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(et.has(t)||(t.f&W)!==0&&ni(t))return!0;return!1}function Hn(e){var t=Re;try{return Re=!0,e()}finally{Re=t}}const Ls=-7169;function K(e,t){e.f=e.f&Ls|t}const ri=new Set,Yn=new Set;function Fs(e){for(var t=0;t<e.length;t++)ri.add(e[t]);for(var n of Yn)n(e)}let ii=null;function bn(e){var $;var t=this,n=t.ownerDocument,i=e.type,r=(($=e.composedPath)==null?void 0:$.call(e))||[],s=r[0]||e.target;ii=e;var o=0,a=ii===e&&e.__root;if(a){var l=r.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=r.indexOf(t);if(f===-1)return;l<=f&&(o=l)}if(s=r[o]||e.target,s!==t){an(e,"currentTarget",{configurable:!0,get(){return s||n}});var u=S,h=C;X(null),ge(null);try{for(var d,p=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var b=s["__"+i];b!=null&&(!s.disabled||e.target===s)&&b.call(s,e)}catch(z){d?p.push(z):d=z}if(e.cancelBubble||_===t||_===null)break;s=_}if(d){for(let z of p)queueMicrotask(()=>{throw z});throw d}}finally{e.__root=t,delete e.currentTarget,X(u),ge(h)}}}function si(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function We(e,t){var n=C;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function mt(e,t){var n=(t&Ui)!==0,i=(t&Vi)!==0,r,s=!e.startsWith("<!>");return()=>{if(w)return We(x,null),x;r===void 0&&(r=si(s?e:"<!>"+e),n||(r=ve(r)));var o=i||Or?document.importNode(r,!0):r.cloneNode(!0);if(n){var a=ve(o),l=o.lastChild;We(a,l)}else We(o,o);return o}}function ai(){if(w)return We(x,null),x;var e=document.createDocumentFragment(),t=document.createComment(""),n=pe();return e.append(t,n),We(t,n),e}function je(e,t){if(w){var n=C;((n.f&fn)===0||n.nodes_end===null)&&(n.nodes_end=x),Qe();return}e!==null&&e.before(t)}const Bs=["touchstart","touchmove"];function Hs(e){return Bs.includes(e)}const Ys=["textarea","script","style","title"];function Us(e){return Ys.includes(e)}function Vs(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function oi(e,t){return li(e,t)}function Ws(e,t){Dn(),t.intro=t.intro??!1;const n=t.target,i=w,r=x;try{for(var s=ve(n);s&&(s.nodeType!==ct||s.data!==ar);)s=Se(s);if(!s)throw ot;oe(!0),H(s);const o=li(e,{...t,anchor:s});return oe(!1),o}catch(o){if(o instanceof Error&&o.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw o;return o!==ot&&console.warn("Failed to hydrate: ",o),t.recover===!1&&cs(),Dn(),jr(n),oe(!1),oi(e,t)}finally{oe(i),H(r)}}const jt=new Map;function li(e,{target:t,anchor:n,props:i={},events:r,context:s,intro:o=!0}){Dn();var a=new Set,l=h=>{for(var d=0;d<h.length;d++){var p=h[d];if(!a.has(p)){a.add(p);var _=Hs(p);t.addEventListener(p,bn,{passive:_});var b=jt.get(p);b===void 0?(document.addEventListener(p,bn,{passive:_}),jt.set(p,1)):jt.set(p,b+1)}}};l(An(ri)),Yn.add(l);var f=void 0,u=Ms(()=>{var h=n??t.appendChild(pe());return Es(h,{pending:()=>{}},d=>{if(s){jn({});var p=le;p.c=s}if(r&&(i.$$events=r),w&&We(d,null),f=e(d,i)||{},w&&(C.nodes_end=x,x===null||x.nodeType!==ct||x.data!==Tn))throw Bt(),ot;s&&Mn()}),()=>{var _;for(var d of a){t.removeEventListener(d,bn);var p=jt.get(d);--p===0?(document.removeEventListener(d,bn),jt.delete(d)):jt.set(d,p)}Yn.delete(l),h!==n&&((_=h.parentNode)==null||_.removeChild(h))}});return Un.set(f,u),f}let Un=new WeakMap;function Js(e,t){const n=Un.get(e);return n?(Un.delete(e),n(t)):Promise.resolve()}class fi{constructor(t,n=!0){D(this,"anchor");A(this,Ce,new Map);A(this,De,new Map);A(this,de,new Map);A(this,Zt,!0);A(this,Qt,()=>{var t=j;if(c(this,Ce).has(t)){var n=c(this,Ce).get(t),i=c(this,De).get(n);if(i)Bn(i);else{var r=c(this,de).get(n);r&&(c(this,De).set(n,r.effect),c(this,de).delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),i=r.effect)}for(const[s,o]of c(this,Ce)){if(c(this,Ce).delete(s),s===t)break;const a=c(this,de).get(o);a&&(G(a.effect),c(this,de).delete(o))}for(const[s,o]of c(this,De)){if(s===n)continue;const a=()=>{if(Array.from(c(this,Ce).values()).includes(s)){var f=document.createDocumentFragment();Vr(o,f),f.append(pe()),c(this,de).set(s,{effect:o,fragment:f})}else G(o);c(this,De).delete(s)};c(this,Zt)||!i?Rt(o,a,!1):a()}}});A(this,kn,t=>{c(this,Ce).delete(t);const n=Array.from(c(this,Ce).values());for(const[i,r]of c(this,de))n.includes(i)||(G(r.effect),c(this,de).delete(i))});this.anchor=t,y(this,Zt,n)}ensure(t,n){var i=j,r=Mr();if(n&&!c(this,De).has(t)&&!c(this,de).has(t))if(r){var s=document.createDocumentFragment(),o=pe();s.append(o),c(this,de).set(t,{effect:_e(()=>n(o)),fragment:s})}else c(this,De).set(t,_e(()=>n(this.anchor)));if(c(this,Ce).set(i,t),r){for(const[a,l]of c(this,De))a===t?i.skipped_effects.delete(l):i.skipped_effects.add(l);for(const[a,l]of c(this,de))a===t?i.skipped_effects.delete(l.effect):i.skipped_effects.add(l.effect);i.oncommit(c(this,Qt)),i.ondiscard(c(this,kn))}else w&&(this.anchor=x),c(this,Qt).call(this)}}Ce=new WeakMap,De=new WeakMap,de=new WeakMap,Zt=new WeakMap,Qt=new WeakMap,kn=new WeakMap;function ci(e){le===null&&is(),Vt(()=>{const t=Hn(e);if(typeof t=="function")return t})}function Mt(e,t,n=!1){w&&Qe();var i=new fi(e),r=n?lt:0;function s(o,a){if(w){const f=pr(e)===rn;if(o===f){var l=un();H(l),i.anchor=l,oe(!1),i.ensure(o,a),oe(!0);return}}i.ensure(o,a)}yn(()=>{var o=!1;t((a,l=!0)=>{o=!0,s(l,a)}),o||s(!1,null)},r)}function Gs(e,t,n){for(var i=e.items,r=[],s=t.length,o=0;o<s;o++)Fn(t[o].e,r,!0);var a=s>0&&r.length===0&&n!==null;if(a){var l=n.parentNode;jr(l),l.append(n),i.clear(),Me(e,t[0].prev,t[s-1].next)}Yr(r,()=>{for(var f=0;f<s;f++){var u=t[f];a||(i.delete(u.k),Me(e,u.prev,u.next)),G(u.e,!a)}})}function Xs(e,t,n,i,r,s=null){var o=e,a={flags:t,items:new Map,first:null};{var l=e;o=w?H(ve(l)):l.appendChild(pe())}w&&Qe();var f=null,u=!1,h=new Map,d=As(()=>{var $=n();return lr($)?$:$==null?[]:An($)}),p,_;function b(){Ks(_,p,a,h,o,r,t,i,n),s!==null&&(p.length===0?f?Bn(f):f=_e(()=>s(o)):f!==null&&Rt(f,()=>{f=null}))}yn(()=>{_??(_=C),p=v(d);var $=p.length;if(u&&$===0)return;u=$===0;let z=!1;if(w){var P=pr(o)===rn;P!==($===0)&&(o=un(),H(o),oe(!1),z=!0)}if(w){for(var T=null,g,R=0;R<$;R++){if(x.nodeType===ct&&x.data===Tn){o=x,z=!0,oe(!1);break}var Q=p[R],Y=i(Q,R);g=Vn(x,a,T,null,Q,Y,R,r,t,n),a.items.set(Y,g),T=g}$>0&&H(un())}if(w)$===0&&s&&(f=_e(()=>s(o)));else if(Mr()){var se=new Set,ne=j;for(R=0;R<$;R+=1){Q=p[R],Y=i(Q,R);var xt=a.items.get(Y)??h.get(Y);xt||(g=Vn(null,a,null,null,Q,Y,R,r,t,n,!0),h.set(Y,g)),se.add(Y)}for(const[at,kt]of a.items)se.has(at)||ne.skipped_effects.add(kt.e);ne.oncommit(b)}else b();z&&oe(!0),v(d)}),w&&(o=x)}function Ks(e,t,n,i,r,s,o,a,l){var f=t.length,u=n.items,h=n.first,d=h,p,_=null,b=[],$=[],z,P,T,g;for(g=0;g<f;g+=1){if(z=t[g],P=a(z,g),T=u.get(P),T===void 0){var R=i.get(P);if(R!==void 0){i.delete(P),u.set(P,R);var Q=_?_.next:d;Me(n,_,R),Me(n,R,Q),Wn(R,Q,r),_=R}else{var Y=d?d.e.nodes_start:r;_=Vn(Y,n,_,_===null?n.first:_.next,z,P,g,s,o,l)}u.set(P,_),b=[],$=[],d=_.next;continue}if((T.e.f&ae)!==0&&Bn(T.e),T!==d){if(p!==void 0&&p.has(T)){if(b.length<$.length){var se=$[0],ne;_=se.prev;var xt=b[0],at=b[b.length-1];for(ne=0;ne<b.length;ne+=1)Wn(b[ne],se,r);for(ne=0;ne<$.length;ne+=1)p.delete($[ne]);Me(n,xt.prev,at.next),Me(n,_,xt),Me(n,at,se),d=se,_=at,g-=1,b=[],$=[]}else p.delete(T),Wn(T,d,r),Me(n,T.prev,T.next),Me(n,T,_===null?n.first:_.next),Me(n,_,T),_=T;continue}for(b=[],$=[];d!==null&&d.k!==P;)(d.e.f&ae)===0&&(p??(p=new Set)).add(d),$.push(d),d=d.next;if(d===null)continue;T=d}b.push(T),_=T,d=T.next}if(d!==null||p!==void 0){for(var kt=p===void 0?[]:An(p);d!==null;)(d.e.f&ae)===0&&kt.push(d),d=d.next;var Zn=kt.length;if(Zn>0){var Qn=f===0?r:null;Gs(n,kt,Qn)}}e.first=n.first&&n.first.e,e.last=_&&_.e;for(var er of i.values())G(er.e);i.clear()}function Vn(e,t,n,i,r,s,o,a,l,f,u){var h=(l&Bi)!==0,d=(l&Yi)===0,p=h?d?Cr(r,!1,!1):ht(r):r,_=(l&Hi)===0?o:ht(o),b={i:_,v:p,k:s,a:null,e:null,prev:n,next:i};try{if(e===null){var $=document.createDocumentFragment();$.append(e=pe())}return b.e=_e(()=>a(e,p,_,f),w),b.e.prev=n&&n.e,b.e.next=i&&i.e,n===null?u||(t.first=b):(n.next=b,n.e.next=b.e),i!==null&&(i.prev=b,i.e.prev=b.e),b}finally{}}function Wn(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==i;){var o=Se(s);r.before(s),s=o}}function Me(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Zs(e,t,n=!1,i=!1,r=!1){var s=e,o="";Ve(()=>{var a=C;if(o===(o=t()??"")){w&&Qe();return}if(a.nodes_start!==null&&(Br(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),o!==""){if(w){x.data;for(var l=Qe(),f=l;l!==null&&(l.nodeType!==ct||l.data!=="");)f=l,l=Se(l);if(l===null)throw Bt(),ot;We(x,f),s=H(l);return}var u=o+"";n?u=`<svg>${u}</svg>`:i&&(u=`<math>${u}</math>`);var h=si(u);if((n||i)&&(h=ve(h)),We(ve(h),h.lastChild),n||i)for(;ve(h);)s.before(ve(h));else s.before(h)}})}function Qs(e,t,n,i,r,s){let o=w;w&&Qe();var a=null;w&&x.nodeType===rs&&(a=x,Qe());var l=w?x:e,f=new fi(l,!1);yn(()=>{const u=t()||null;var h=u==="svg"?Ji:null;if(u===null){f.ensure(null,null);return}return f.ensure(u,d=>{if(u){if(a=w?a:h?document.createElementNS(h,u):document.createElement(u),We(a,a),i){w&&Us(u)&&a.append(document.createComment(""));var p=w?ve(a):a.appendChild(pe());w&&(p===null?oe(!1):H(p)),i(a,p)}C.nodes_end=a,d.before(a)}w&&H(d)}),()=>{}},lt),Ir(()=>{}),o&&(oe(!0),H(l))}function ui(e,t){Dr(()=>{var n=e.getRootNode(),i=n.host?n:n.head??n.ownerDocument.head;if(!i.querySelector("#"+t.hash)){const r=document.createElement("style");r.id=t.hash,r.textContent=t.code,i.appendChild(r)}})}function ea(e,t,n){var i=e==null?"":""+e;return t&&(i=i?i+" "+t:t),i===""?null:i}function ta(e,t){return e==null?null:String(e)}function ye(e,t,n,i,r,s){var o=e.__className;if(w||o!==n||o===void 0){var a=ea(n,i);(!w||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=n}return s}function nt(e,t,n,i){var r=e.__style;if(w||r!==t){var s=ta(t);(!w||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}return i}const na=Symbol("is custom element"),ra=Symbol("is html");function di(e,t,n,i){var r=ia(e);w&&(r[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||r[t]!==(r[t]=n)&&(t==="loading"&&(e[ns]=n),n==null?e.removeAttribute(t):typeof n!="string"&&pi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function hi(e,t,n){var i=S,r=C;let s=w;w&&oe(!1),X(null),ge(null);try{t!=="style"&&(Jn.has(e.getAttribute("is")||e.nodeName)||!customElements||customElements.get(e.getAttribute("is")||e.tagName.toLowerCase())?pi(e).includes(t):n&&typeof n=="object")?e[t]=n:di(e,t,n==null?n:String(n))}finally{X(i),ge(r),s&&oe(!0)}}function ia(e){return e.__attributes??(e.__attributes={[na]:e.nodeName.includes("-"),[ra]:e.namespaceURI===Wi})}var Jn=new Map;function pi(e){var t=e.getAttribute("is")||e.nodeName,n=Jn.get(t);if(n)return n;Jn.set(t,n=[]);for(var i,r=e,s=Element.prototype;s!==r;){i=Xi(r);for(var o in i)i[o].set&&n.push(o);r=fr(r)}return n}function vi(e,t){return e===t||(e==null?void 0:e[cn])===t}function sa(e={},t,n,i){return Dr(()=>{var r,s;return Ln(()=>{r=s,s=[],Hn(()=>{e!==n(...s)&&(t(e,...s),r&&vi(n(...r),e)&&t(null,...r))})}),()=>{dn(()=>{s&&vi(n(...s),e)&&t(null,...s)})}}),e}function we(e,t,n,i){var r=i,s=!0,o=()=>(s&&(s=!1,r=i),r),a;a=e[t],a===void 0&&i!==void 0&&(a=o());var l;l=()=>{var d=e[t];return d===void 0?o():(s=!0,d)};var f=!1,u=_n(()=>(f=!1,l())),h=C;return(function(d,p){if(arguments.length>0){const _=p?v(u):d;return k(u,_),f=!0,r!==void 0&&(r=_),d}return _t&&f||(h.f&Ke)!==0?u.v:v(u)})}function aa(e){return new oa(e)}class oa{constructor(t){A(this,Ge);A(this,Ee);var s;var n=new Map,i=(o,a)=>{var l=Cr(a,!1,!1);return n.set(o,l),l};const r=new Proxy({...t.props||{},$$events:{}},{get(o,a){return v(n.get(a)??i(a,Reflect.get(o,a)))},has(o,a){return a===ts?!0:(v(n.get(a)??i(a,Reflect.get(o,a))),Reflect.has(o,a))},set(o,a,l){return k(n.get(a)??i(a,l),l),Reflect.set(o,a,l)}});y(this,Ee,(t.hydrate?Ws:oi)(t.component,{target:t.target,anchor:t.anchor,props:r,context:t.context,intro:t.intro??!1,recover:t.recover})),(!((s=t==null?void 0:t.props)!=null&&s.$$host)||t.sync===!1)&&fe(),y(this,Ge,r.$$events);for(const o of Object.keys(c(this,Ee)))o==="$set"||o==="$destroy"||o==="$on"||an(this,o,{get(){return c(this,Ee)[o]},set(a){c(this,Ee)[o]=a},enumerable:!0});c(this,Ee).$set=o=>{Object.assign(r,o)},c(this,Ee).$destroy=()=>{Js(c(this,Ee))}}$set(t){c(this,Ee).$set(t)}$on(t,n){c(this,Ge)[t]=c(this,Ge)[t]||[];const i=(...r)=>n.call(this,...r);return c(this,Ge)[t].push(i),()=>{c(this,Ge)[t]=c(this,Ge)[t].filter(r=>r!==i)}}$destroy(){c(this,Ee).$destroy()}}Ge=new WeakMap,Ee=new WeakMap;let _i;typeof HTMLElement=="function"&&(_i=class extends HTMLElement{constructor(t,n,i){super();D(this,"$$ctor");D(this,"$$s");D(this,"$$c");D(this,"$$cn",!1);D(this,"$$d",{});D(this,"$$r",!1);D(this,"$$p_d",{});D(this,"$$l",{});D(this,"$$l_u",new Map);D(this,"$$me");this.$$ctor=t,this.$$s=n,i&&this.attachShadow({mode:"open"})}addEventListener(t,n,i){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){const r=this.$$c.$on(t,n);this.$$l_u.set(n,r)}super.addEventListener(t,n,i)}removeEventListener(t,n,i){if(super.removeEventListener(t,n,i),this.$$c){const r=this.$$l_u.get(n);r&&(r(),this.$$l_u.delete(n))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(r){return s=>{const o=document.createElement("slot");r!=="default"&&(o.name=r),je(s,o)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const n={},i=la(this);for(const r of this.$$s)r in i&&(r==="default"&&!this.$$d.children?(this.$$d.children=t(r),n.default=!0):n[r]=t(r));for(const r of this.attributes){const s=this.$$g_p(r.name);s in this.$$d||(this.$$d[s]=$n(s,r.value,this.$$p_d,"toProp"))}for(const r in this.$$p_d)!(r in this.$$d)&&this[r]!==void 0&&(this.$$d[r]=this[r],delete this[r]);this.$$c=aa({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:n,$$host:this}}),this.$$me=js(()=>{Ln(()=>{var r;this.$$r=!0;for(const s of sn(this.$$c)){if(!((r=this.$$p_d[s])!=null&&r.reflect))continue;this.$$d[s]=this.$$c[s];const o=$n(s,this.$$d[s],this.$$p_d,"toAttribute");o==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,o)}this.$$r=!1})});for(const r in this.$$l)for(const s of this.$$l[r]){const o=this.$$c.$on(r,s);this.$$l_u.set(s,o)}this.$$l={}}}attributeChangedCallback(t,n,i){var r;this.$$r||(t=this.$$g_p(t),this.$$d[t]=$n(t,i,this.$$p_d,"toProp"),(r=this.$$c)==null||r.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(t){return sn(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function $n(e,t,n,i){var s;const r=(s=n[e])==null?void 0:s.type;if(t=r==="Boolean"&&typeof t!="boolean"?t!=null:t,!i||!n[e])return t;if(i==="toAttribute")switch(r){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(r){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function la(e){const t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}function gi(e,t,n,i,r,s){let o=class extends _i{constructor(){super(e,n,r),this.$$p_d=t}static get observedAttributes(){return sn(t).map(a=>(t[a].attribute||a).toLowerCase())}};return sn(t).forEach(a=>{an(o.prototype,a,{get(){return this.$$c&&a in this.$$c?this.$$c[a]:this.$$d[a]},set(l){var h;l=$n(a,l,t),this.$$d[a]=l;var f=this.$$c;if(f){var u=(h=At(f,a))==null?void 0:h.get;u?f[a]=l:f.$set({[a]:l})}}})}),i.forEach(a=>{an(o.prototype,a,{get(){var l;return(l=this.$$c)==null?void 0:l[a]}})}),s&&(o=s(o)),e.element=o,o}class Gn extends Error{constructor(t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,Gn),this.name="TimeoutError",this.timeout=t,this.message=`Timed out in ${t} ms.`}}const fa=(e,t)=>{const n=new Promise((i,r)=>{setTimeout(()=>{r(new Gn(e))},e)});return Promise.race([t,n])},mi=e=>{if(typeof e.getCardSize=="function")try{return fa(500,e.getCardSize()).catch(()=>1)}catch{return 1}return customElements.get(e.localName)?1:customElements.whenDefined(e.localName).then(()=>mi(e))};var ca=mt('<span class="loading svelte-lv9s7p">Loading...</span>'),ua=mt("<div><!> <!></div>");const da={hash:"svelte-lv9s7p",code:`.loading.svelte-lv9s7p {padding:1em;display:block;}.animation.svelte-lv9s7p {hui-card {display:flex;flex-direction:column;}}.outer-container.animation.svelte-lv9s7p {transition:margin-bottom 0.35s ease;}.outer-container.animation.open.svelte-lv9s7p,
  .outer-container.animation.opening.svelte-lv9s7p {margin-bottom:inherit;}.outer-container.animation.close.svelte-lv9s7p,
  .outer-container.animation.closing.svelte-lv9s7p {margin-bottom:var(--expander-animation-height, -100%);}.outer-container.animation.opening.svelte-lv9s7p {
    animation: svelte-lv9s7p-fadeInOpacity 0.5s forwards ease;
    -webkit-animation: svelte-lv9s7p-fadeInOpacity 0.5s forwards ease;}.outer-container.animation.closing.svelte-lv9s7p {
      animation: svelte-lv9s7p-fadeOutOpacity 0.5s forwards ease;
      -webkit-animation: svelte-lv9s7p-fadeOutOpacity 0.5s forwards ease;}
  @keyframes svelte-lv9s7p-fadeInOpacity {
      0% {
          opacity: 0;
      }
      100% {
          opacity: 1;
      }
  }
  @-webkit-keyframes svelte-lv9s7p-fadeInOpacity {
      0% {
          opacity: 0;
      }
      100% {
          opacity: 1;
      }
  }
    @keyframes svelte-lv9s7p-fadeOutOpacity {
      0% {
          opacity: 1;
      }
      100% {
          opacity: 0;
      }
  }
  @-webkit-keyframes svelte-lv9s7p-fadeOutOpacity {
      0% {
          opacity: 1;
      }
      100% {
          opacity: 0;
      }
  }`};function Xn(e,t){jn(t,!0),ui(e,da);const n=we(t,"type",7,"div"),i=we(t,"config"),r=we(t,"hass"),s=we(t,"preview"),o=we(t,"marginTop",7,"0px"),a=we(t,"open"),l=we(t,"animation",7,!0),f=we(t,"animationState"),u=we(t,"clearCardCss",7,!1);let h=B(void 0),d=B(!0),p=B(0);const _=JSON.parse(JSON.stringify(i()));Vt(()=>{v(h)&&(v(h).hass=r())}),Vt(()=>{v(h)&&s()!==void 0&&(v(h).preview=s())}),Vt(()=>{var g;v(h)&&(_.disabled=!a(),(g=v(h)._element)==null||g.dispatchEvent(new CustomEvent("card-visibility-changed",{detail:{value:a()},bubbles:!0,composed:!1})))}),ci(async()=>{const g=document.createElement("hui-card");g.hass=r(),g.preview=s(),_.disabled=!a(),g.config=_,g.load(),v(h)&&(u()&&(g.style.setProperty("--ha-card-background","transparent"),g.style.setProperty("--ha-card-box-shadow","none"),g.style.setProperty("--ha-card-border-color","transparent"),g.style.setProperty("--ha-card-border-width","0px"),g.style.setProperty("--ha-card-border-radius","0px"),g.style.setProperty("--ha-card-backdrop-filter","none")),v(h).replaceWith(g),k(h,g,!0),k(d,!1),l()&&(k(p,await mi(g)*56),new ResizeObserver(Q=>{for(const Y of Q)if(Y.contentBoxSize){const se=Array.isArray(Y.contentBoxSize)?Y.contentBoxSize[0]:Y.contentBoxSize;k(p,se.blockSize||v(p),!0)}else k(p,Y.contentRect.height||v(p),!0)}).observe(g)))});var b={get type(){return n()},set type(g="div"){n(g),fe()},get config(){return i()},set config(g){i(g),fe()},get hass(){return r()},set hass(g){r(g),fe()},get preview(){return s()},set preview(g){s(g),fe()},get marginTop(){return o()},set marginTop(g="0px"){o(g),fe()},get open(){return a()},set open(g){a(g),fe()},get animation(){return l()},set animation(g=!0){l(g),fe()},get animationState(){return f()},set animationState(g){f(g),fe()},get clearCardCss(){return u()},set clearCardCss(g=!1){u(g),fe()}},$=ua(),z=tt($);Qs(z,n,!1,(g,R)=>{sa(g,Q=>k(h,Q,!0),()=>v(h)),ye(g,0,"svelte-lv9s7p")});var P=Ut(z,2);{var T=g=>{var R=ca();je(g,R)};Mt(P,g=>{v(d)&&g(T)})}return Ue($),Ve(()=>{ye($,1,`outer-container${a()?" open":" close"}${l()?" animation "+f():""}`,"svelte-lv9s7p"),nt($,`margin-top: ${(a()?o():"0px")??""};${v(p)?` --expander-animation-height: -${v(p)}px;`:""}`)}),je(e,$),Mn(b)}customElements.define("expander-sub-card",gi(Xn,{type:{},config:{},hass:{},preview:{},marginTop:{},open:{},animation:{},animationState:{},clearCardCss:{}},[],[],!0));const yi=(e,t)=>{var n;(n=e.dispatchEvent)==null||n.call(e,new CustomEvent("haptic",{detail:t,bubbles:!0,composed:!0}))},Kn={gap:"0.0em","expanded-gap":"0.6em",padding:"1em",clear:!1,"clear-children":!1,title:" ","overlay-margin":"0.0em","child-padding":"0.0em","child-margin-top":"0.0em","button-background":"transparent","expander-card-background":"var(--ha-card-background,var(--card-background-color,#fff))","header-color":"var(--primary-text-color,#fff)","arrow-color":"var(--arrow-color,var(--primary-text-color,#fff))","expander-card-display":"block","title-card-clickable":!1,"min-width-expanded":0,"max-width-expanded":0,icon:"mdi:chevron-down","icon-rotate-degree":"180deg",animation:!0};var ha=mt('<button aria-label="Toggle button"><ha-icon></ha-icon></button>',2),pa=mt('<div id="id1"><div id="id2"><!></div> <!></div>'),va=mt("<button><div> </div> <ha-icon></ha-icon></button>",2),_a=mt("<div><div></div></div>"),ga=mt("<ha-card><!> <!> <!></ha-card>",2);const ma={hash:"svelte-1jqiztq",code:`.expander-card.svelte-1jqiztq {display:var(--expander-card-display,block);gap:var(--gap);padding:var(--padding);background:var(--card-background,#fff);}.expander-card.animation.svelte-1jqiztq {transition:gap 0.35s ease, background-color var(--background-animation-duration, 0) ease;}.children-wrapper.svelte-1jqiztq {display:flex;flex-direction:column;}.children-wrapper.animation.opening.svelte-1jqiztq,
    .children-wrapper.animation.closing.svelte-1jqiztq {overflow:hidden;}.children-container.animation.svelte-1jqiztq {transition:padding 0.35s ease, gap 0.35s ease;}.children-container.svelte-1jqiztq {padding:var(--child-padding);display:var(--expander-card-display,block);gap:var(--gap);}.clear.svelte-1jqiztq {background:none !important;background-color:transparent !important;border-style:none !important;box-shadow:none !important;}.title-card-header.svelte-1jqiztq {display:flex;align-items:center;justify-content:space-between;flex-direction:row;}.title-card-header-overlay.svelte-1jqiztq {display:block;}.title-card-container.svelte-1jqiztq {width:100%;padding:var(--title-padding);}.header.svelte-1jqiztq {display:flex;flex-direction:row;align-items:center;padding:0.8em 0.8em;margin:2px;background:var(--button-background);border-style:none;width:var(--header-width,auto);color:var(--header-color,#fff);}.header-overlay.svelte-1jqiztq {position:absolute;top:0;right:0;margin:var(--overlay-margin);}.title.svelte-1jqiztq {width:100%;text-align:left;}.ico.animation.svelte-1jqiztq {transition-property:transform;transition-duration:0.35s;}.ico.svelte-1jqiztq {color:var(--arrow-color,var(--primary-text-color,#fff));}.flipped.svelte-1jqiztq {transform:rotate(var(--icon-rotate-degree,180deg));}.ripple.svelte-1jqiztq {background-position:center;transition:background 0.8s;border-radius:1em;}.ripple.svelte-1jqiztq:hover {background:#ffffff12 radial-gradient(circle, transparent 1%, #ffffff12 1%) center/15000%;}.ripple.svelte-1jqiztq:active {background-color:#ffffff25;background-size:100%;transition:background 0s;}`};function wi(e,t){jn(t,!0),ui(e,ma);const n=we(t,"hass"),i=we(t,"preview"),r=we(t,"config",7,Kn);let s=B(!1),o=B(null),a=B(pt(!!i())),l=B(pt(!!i())),f=B(!0),u=B("idle"),h=B(null),d=B(0);const p=r()["storage-id"],_="expander-open-"+p,b=`<style>${r().style}</style>`;k(f,i()||($(r()["show-button-users"])??!0),!0),Vt(()=>{i()===v(l)||i()===void 0||(k(l,i(),!0),v(l)?(T(!0),k(f,!0)):(z(),k(f,$(r()["show-button-users"])??!0,!0)))});function $(m){var E,O,he,Te;if(m!==void 0)return((O=(E=n())==null?void 0:E.user)==null?void 0:O.name)!==void 0&&m.includes((Te=(he=n())==null?void 0:he.user)==null?void 0:Te.name)}function z(){if($(r()["start-expanded-users"]))T(!0);else if(p!==void 0)try{const m=localStorage.getItem(_);m===null?r().expanded!==void 0&&T(r().expanded):k(a,m?m==="true":v(a),!0)}catch(m){console.error(m)}else r().expanded!==void 0?T(r().expanded):T(!1)}function P(m){v(h)&&(clearTimeout(v(h)),k(h,null));const E=m!==void 0?m:!v(a);r().animation?(k(u,E?"opening":"closing",!0),E?(T(!0),k(h,setTimeout(()=>{k(u,"idle"),k(h,null)},350),!0)):k(h,setTimeout(()=>{T(!1),k(u,"idle"),k(h,null)},350),!0)):T(E)}function T(m){if(k(a,m,!0),p!==void 0)try{localStorage.setItem(_,v(a)?"true":"false")}catch(E){console.error(E)}v(a)&&v(d)===0&&k(d,.35)}function g(m){var O,he;const E=(he=(O=m.detail)==null?void 0:O["expander-card"])==null?void 0:he.data;(E==null?void 0:E["expander-card-id"])===r()["expander-card-id"]&&(E.action==="open"&&!v(a)?P(!0):E.action==="close"&&v(a)?P(!1):E.action==="toggle"&&P())}function R(){document.body.removeEventListener("ll-custom",g)}ci(()=>{const m=r()["min-width-expanded"],E=r()["max-width-expanded"],O=document.body.offsetWidth;return m&&E?r().expanded=O>=m&&O<=E:m?r().expanded=O>=m:E&&(r().expanded=O<=E),i()?T(!0):z(),document.body.addEventListener("ll-custom",g),R});const Q=m=>{if(v(s))return m.preventDefault(),m.stopImmediatePropagation(),k(s,!1),v(o)&&(clearTimeout(v(o)),k(o,null)),!1;yi(m.currentTarget,"light"),P()},Y=m=>{const E=m.currentTarget;E!=null&&E.classList.contains("title-card-container")&&Q(m)};let se,ne=!1,xt=0,at=0;const kt=m=>{se=m.target,xt=m.touches[0].clientX,at=m.touches[0].clientY,ne=!1},Zn=m=>{const E=m.touches[0].clientX,O=m.touches[0].clientY;(Math.abs(E-xt)>10||Math.abs(O-at)>10)&&(ne=!0)},Qn=m=>{!ne&&se===m.target&&r()["title-card-clickable"]&&(yi(se,"light"),P(),k(s,!0),k(o,window.setTimeout(()=>{k(s,!1),k(o,null)},100),!0)),se=void 0};var er={get hass(){return n()},set hass(m){n(m),fe()},get preview(){return i()},set preview(m){i(m),fe()},get config(){return r()},set config(m=Kn){r(m),fe()}},en=ga(),$i=tt(en);{var ya=m=>{var E=pa(),O=tt(E);O.__touchstart=kt,O.__touchmove=Zn,O.__touchend=Qn,O.__click=function(...Fe){var Ae;(Ae=r()["title-card-clickable"]?Y:null)==null||Ae.apply(this,Fe)};var he=tt(O);Xn(he,{get hass(){return n()},get preview(){return i()},get config(){return r()["title-card"]},get type(){return r()["title-card"].type},animation:!1,open:!0,animationState:"idle",get clearCardCss(){return r()["clear-children"]}}),Ue(O);var Te=Ut(O,2);{var Le=Fe=>{var Ae=ha();Ae.__click=Q;var St=tt(Ae);Ve(()=>hi(St,"icon",r().icon)),Ue(Ae),Ve(()=>{nt(Ae,`--overlay-margin:${r()["overlay-margin"]??""}; --button-background:${r()["button-background"]??""}; --header-color:${r()["header-color"]??""};`),ye(Ae,1,`header ripple${r()["title-card-button-overlay"]?" header-overlay":""}${v(a)?" open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq"),nt(St,`--arrow-color:${r()["arrow-color"]??""}`),ye(St,1,`ico${v(a)&&v(u)!=="closing"?" flipped open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq")}),je(Fe,Ae)};Mt(Te,Fe=>{v(f)&&Fe(Le)})}Ue(E),Ve(()=>{ye(E,1,`title-card-header${r()["title-card-button-overlay"]?"-overlay":""}${v(a)?" open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq"),ye(O,1,`title-card-container${v(a)?" open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq"),nt(O,`--title-padding:${(r()["title-card-padding"]?r()["title-card-padding"]:"0px")??""};`),di(O,"role",r()["title-card-clickable"]?"button":void 0)}),je(m,E)},wa=m=>{var E=ai(),O=Rr(E);{var he=Te=>{var Le=va();Le.__click=Q;var Fe=tt(Le),Ae=tt(Fe,!0);Ue(Fe);var St=Ut(Fe,2);Ve(()=>hi(St,"icon",r().icon)),Ue(Le),Ve(()=>{ye(Le,1,`header${r()["expander-card-background-expanded"]?"":" ripple"}${v(a)?" open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq"),nt(Le,`--header-width:100%; --button-background:${r()["button-background"]??""};--header-color:${r()["header-color"]??""};`),ye(Fe,1,`primary title${v(a)?" open":" close"}`,"svelte-1jqiztq"),Vs(Ae,r().title),nt(St,`--arrow-color:${r()["arrow-color"]??""}`),ye(St,1,`ico${v(a)&&v(u)!=="closing"?" flipped open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq")}),je(Te,Le)};Mt(O,Te=>{v(f)&&Te(he)})}je(m,E)};Mt($i,m=>{r()["title-card"]?m(ya):m(wa,!1)})}var Ei=Ut($i,2);{var ba=m=>{var E=_a(),O=tt(E);Xs(O,20,()=>r().cards,he=>he,(he,Te)=>{{let Le=Ts(()=>v(a)&&i());Xn(he,{get hass(){return n()},get preview(){return v(Le)},get config(){return Te},get type(){return Te.type},get marginTop(){return r()["child-margin-top"]},get open(){return v(a)},get animation(){return r().animation},get animationState(){return v(u)},get clearCardCss(){return r()["clear-children"]}})}}),Ue(O),Ue(E),Ve(()=>{ye(E,1,`children-wrapper ${r().animation?"animation "+v(u):""}${v(a)?" open":" close"}`,"svelte-1jqiztq"),nt(O,`--expander-card-display:${r()["expander-card-display"]??""};
                --gap:${(v(a)&&v(u)!=="closing"?r()["expanded-gap"]:r().gap)??""};
                --child-padding:${(v(a)&&v(u)!=="closing"?r()["child-padding"]:"0px")??""};`),ye(O,1,`children-container${v(a)?" open":" close"}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq")}),je(m,E)};Mt(Ei,m=>{r().cards&&m(ba)})}var $a=Ut(Ei,2);{var Ea=m=>{var E=ai(),O=Rr(E);Zs(O,()=>b),je(m,E)};Mt($a,m=>{b&&m(Ea)})}return Ue(en),Ve(()=>{ye(en,1,`expander-card${r().clear?" clear":""}${v(a)?" open":" close"} ${v(u)}${r().animation?" animation "+v(u):""}`,"svelte-1jqiztq"),nt(en,`--expander-card-display:${r()["expander-card-display"]??""};
     --gap:${(v(a)&&v(u)!=="closing"?r()["expanded-gap"]:r().gap)??""}; --padding:${r().padding??""};
     --expander-state:${v(a)??""};
     --icon-rotate-degree:${r()["icon-rotate-degree"]??""};
     --card-background:${(v(a)&&v(u)!=="closing"&&r()["expander-card-background-expanded"]?r()["expander-card-background-expanded"]:r()["expander-card-background"])??""};
     --background-animation-duration:${v(d)??""}s;
    `)}),je(e,en),Mn(er)}return Fs(["touchstart","touchmove","touchend","click"]),customElements.define("expander-card",gi(wi,{hass:{},preview:{},config:{}},[],[],!0,e=>class extends e{constructor(){super(...arguments);D(this,"config")}static async getConfigElement(){return await Fi(),document.createElement("expander-card-editor")}static getStubConfig(){return{type:"custom:expander-card",title:"Expander Card",cards:[]}}setConfig(n={}){this.config={...Kn,...n}}})),console.info(`%c  Expander-Card 
%c Version 3.2.0`,"color: orange; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"expander-card",name:"Expander Card",preview:!0,description:"Expander card"}),wi}));
//# sourceMappingURL=expander-card.umd.cjs.map
